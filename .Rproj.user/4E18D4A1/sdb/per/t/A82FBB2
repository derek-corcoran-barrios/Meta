{
    "collab_server" : "",
    "contents" : "---\ntitle: \"Metanalysis\"\nauthor: \"Derek Corcoran\"\ndate: \"February 13, 2017\"\noutput: pdf_document\n---\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(echo = TRUE)\nknitr::opts_chunk$set(dev = 'pdf')\n```\n\n## summary stats\n\n```{r, message=FALSE, warning=FALSE, echo=FALSE}\nMeta <- read.csv(\"~/Metanalysis/Meta_MasterData.csv\")\nMeta <- Meta[1:188,]\n\nlibrary(ggplot2)\n```\n###Studies per fitness measure\n\n```{r, message=FALSE, warning=FALSE, echo=FALSE}\n\nggplot(Meta, aes(x=reorder(Fitness.measure,Fitness.measure, function(x)-length(x)))) + geom_bar() + xlab(\"Performance measure\") + ylab(\"Number of studies\") + theme_classic()\n```\n\n####Categories present by Fitness measure\n\n#####Functional group\n```{r, message=FALSE, warning=FALSE, echo=FALSE}\nggplot(Meta, aes(x=reorder(Fitness.measure,Fitness.measure, function(x)-length(x)))) + geom_bar(aes(fill = Functional.group), position = \"dodge\")+ xlab(\"Performance measure\") + ylab(\"Number of studies\") + theme_classic()\n```\n\n#####Taxonimical Order\n\n```{r, message=FALSE, warning=FALSE, echo=FALSE}\nggplot(Meta, aes(x=reorder(Fitness.measure,Fitness.measure, function(x)-length(x)))) + geom_bar(aes(fill = Order), position = \"dodge\")+ xlab(\"Performance measure\") + ylab(\"Number of studies\") + theme_classic()\n```\n\n#####Study type\n\n```{r, message=FALSE, warning=FALSE, echo=FALSE}\nggplot(Meta, aes(x=reorder(Fitness.measure,Fitness.measure, function(x)-length(x)))) + geom_bar(aes(fill = Study.Type), position = \"dodge\")+ xlab(\"Performance measure\") + ylab(\"Number of studies\") + theme_classic()\n```\n\n## Use of Hedge's g for testing differences\n\n####Interpreting Results\n\nA g of 1 indicates the two groups differ by 1 standard deviation, a g of 2 indicates they differ by 2 standard deviations, and so on. Standard deviations are equivalent to z-scores (1 standard deviation = 1 z-score).\nRule of Thumb Interpretation\n\nCohen’s d and Hedges’ g are interpreted in a similar way. Cohen suggested using the following rule of thumb for interpreting results:\n\n- Small effect (cannot be discerned by the naked eye) = 0.2\n- Medium Effect = 0.5\n- Large Effect (can be seen by the naked eye) = 0.8\n\n### Heterogeneity\n\n####Tau Square\n-  An estimate of the between-study variance in a random-effects meta-analysis is given as (known as tau-squared). \n\n-  If > 1, suggests presence of substantial statistical \nheterogeneity.\n\n####I Squared\n\nThresholds for the interpretation of I2 can be misleading, since the importance of inconsistency depends on several factors. A rough guide to interpretation is as follows:\n\n– 0% to 40%: might not be important;\n\n– 30% to 60%: may represent moderate \nheterogeneity;\n\n– 50% to 90%: may represent substantial \nheterogeneity;\n\n– 75% to 100%: considerable heterogeneity*.\n\nIf there is evidence of statistical heterogeneity, we should proceed cautiously, investigate  the reasons for its presence and  modify our approach accordingly, perhaps by dividing the studies into subgroups of those with similar characteristics.    \n\n## Fitness measure\n\n```{r, message=FALSE, warning=FALSE, echo=FALSE}\n\nlibrary(metafor)\n\n#Abundance\nAbundance <- dplyr::filter(Meta, Fitness.measure == \"abundance\")\n\ndat1 <- escalc(measure=\"SMDH\", m2i=Con_Mean, sd2i=Con_SE, n2i=Study.control..n., m1i=T1_Mean, sd1i=T1_SE, n1i=Study.T1..n., data=Abundance, vtype = \"UB\")\n\nres <- rma(yi, vi, data=dat1, refline = 0, method = \"HE\", slab = paste(dat1$Authors, dat1$Year))\n\nAbund <- data.frame(estimate = res$b, ci.ub = res$ci.ub, ci.lb = res$ci.lb, group = c(\"Abundance\"), p = res$pval, n =nrow(Abundance))\n#Behavior\n\nBehavior <- dplyr::filter(Meta, Fitness.measure == \"behavior\")\n\ndat1 <- escalc(measure=\"SMDH\", m2i=Con_Mean, sd2i=Con_SE, n2i=Study.control..n., m1i=T1_Mean, sd1i=T1_SE, n1i=Study.T1..n., data=Behavior, vtype = \"UB\")\n\nres2 <- rma(yi, vi, data=dat1, refline = 0, method = \"HE\", slab = paste(dat1$Authors, dat1$Year))\n\nBehav <- data.frame(estimate = res2$b, ci.ub = res2$ci.ub, ci.lb = res2$ci.lb, group = c(\"Behavior\"), p = res2$pval, n =nrow(Behavior))\n#Survival\n\nsurvival <- dplyr::filter(Meta, Fitness.measure == \"survival\")\n\ndat1 <- escalc(measure=\"SMDH\", m2i=Con_Mean, sd2i=Con_SE, n2i=Study.control..n., m1i=T1_Mean, sd1i=T1_SE, n1i=Study.T1..n., data=survival, vtype = \"UB\")\n\nres3 <- rma(yi, vi, data=dat1, refline = 0, method = \"HE\", slab = paste(dat1$Authors, dat1$Year))\n\nSurviv <- data.frame(estimate = res3$b, ci.ub = res3$ci.ub, ci.lb = res3$ci.lb, group = c(\"Survival\"), p = res3$pval, n =nrow(survival))\n\n#Reproduction\n\nreproduction <- dplyr::filter(Meta, Fitness.measure == \"reproduction\")\n\ndat1 <- escalc(measure=\"SMDH\", m2i=Con_Mean, sd2i=Con_SE, n2i=Study.control..n., m1i=T1_Mean, sd1i=T1_SE, n1i=Study.T1..n., data=reproduction, vtype = \"UB\")\n\nres4 <- rma(yi, vi, data=dat1, refline = 0, method = \"HE\", slab = paste(dat1$Authors, dat1$Year))\n\nReprod <- data.frame(estimate = res4$b, ci.ub = res4$ci.ub, ci.lb = res4$ci.lb, group = c(\"Reproduction\"), p = res4$pval, n =nrow(reproduction))\n\n#Condition\n\ncondition <- dplyr::filter(Meta, Fitness.measure == \"condition\")\n\ndat1 <- escalc(measure=\"SMDH\", m2i=Con_Mean, sd2i=Con_SE, n2i=Study.control..n., m1i=T1_Mean, sd1i=T1_SE, n1i=Study.T1..n., data=condition, vtype = \"UB\")\n\nres4 <- rma(yi, vi, data=dat1, refline = 0, method = \"HE\", slab = paste(dat1$Authors, dat1$Year))\n\nCond <- data.frame(estimate = res4$b, ci.ub = res4$ci.ub, ci.lb = res4$ci.lb, group = c(\"Condition\"), p = res4$pval, n =nrow(condition))\n\nAll <- rbind(Abund, Behav, Surviv, Reprod, Cond)\n\nknitr::kable(All, digits = 3, row.names = FALSE)\n\nAll <- All[-4,]\n\nggplot(All, aes(x = group, y = estimate)) + geom_point(aes(size = n)) + coord_flip() + geom_errorbar(aes(ymin=ci.lb, ymax=ci.ub),width=0.0) + geom_hline(yintercept = 0, linetype=2) + ylim(c(-8.5, 8.5)) + ylab(c(\"Standardized Mean Difference\")) + theme_classic() + xlab(c(\"\"))\n\n```\n\n## Abundance\n\n```{r, message=FALSE, warning=FALSE, echo=FALSE, fig.height=10, fig.width=6}\nlibrary(meta)\nlibrary(metafor)\n###########Examples\n\nAbundance <- dplyr::filter(Meta, Fitness.measure == \"abundance\")\n\n\n\ndat1 <- escalc(measure=\"SMDH\", m2i=Con_Mean, sd2i=Con_SE, n2i=Study.control..n., m1i=T1_Mean, sd1i=T1_SE, n1i=Study.T1..n., data=Abundance, vtype = \"UB\")\n\nres <- rma(yi, vi, data=dat1, refline = 0, method = \"HE\", slab = paste(dat1$Authors, dat1$Year))\n\nnullmod <- data.frame(estimate = res$b, ci.ub = res$ci.ub, ci.lb = res$ci.lb, group = c(\"Null\"), p = res$pval, n =nrow(Abundance))\n\n\n\nres1 <- rma(yi, vi, data=dat1, refline = 0, method = \"HE\", mods =~  factor(Functional.group) - 1, slab = paste(dat1$Authors, dat1$Year))\n\nfunctionalgroup <- data.frame(estimate = res1$b, ci.ub = res1$ci.ub, ci.lb = res1$ci.lb, group = c(\"detritivore\", \"omnivore\", \"pollinator\", \"predator\"), p = res1$pval, n = c(length(dplyr::filter(Abundance, Functional.group == \"detritivore\")$Functional.group), length(dplyr::filter(Abundance, Functional.group == \"omnivore\")$Functional.group), length(dplyr::filter(Abundance, Functional.group == \"pollinator\")$Functional.group), length(dplyr::filter(Abundance, Functional.group == \"predator\")$Functional.group)))\n\n\nAll <- rbind(nullmod, functionalgroup)\n\nknitr::kable(All, digits = 3, row.names = FALSE)\n\n```\n\n\n\n\n```{r, message=FALSE, warning=FALSE, echo=FALSE, cache=FALSE}\n\nggplot(All, aes(x = group, y = estimate)) + geom_point(aes(size = n)) + coord_flip() + geom_errorbar(aes(ymin=ci.lb, ymax=ci.ub),width=0.0) + geom_hline(yintercept = 0, linetype=2) + ylim(c(-6, 6)) + ylab(c(\"Standardized Mean Difference\")) + theme_classic() + xlab(c(\"\"))\n\n```\n\n",
    "created" : 1487015808511.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "475279282",
    "id" : "A82FBB2",
    "lastKnownWriteTime" : 1487710678,
    "last_content_update" : 1487710678576,
    "path" : "~/Metanalysis/Meta.Rmd",
    "project_path" : "Meta.Rmd",
    "properties" : {
        "tempName" : "Untitled2"
    },
    "relative_order" : 16,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}